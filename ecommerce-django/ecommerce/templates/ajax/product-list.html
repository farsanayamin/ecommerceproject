{% for product in products %}
<div class="col-md-4">
    <figure class="card card-product-grid">
        <div class="img-wrap"> 
            <a href="{{product.get_url}}">
                
                <img src="{{product.image.url}}">
            </a>
            
        </div> <!-- img-wrap.// -->
        <figcaption class="info-wrap">
            <div class="fix-height">
                <a href="{{product.get_url}}" class="title"> {{product.product_name}} </a>
                {% comment %} <div class="price-wrap mt-2">
                    <span class="price">${{product.calculate_discounted_price}}</span>
                    {% if product.price != product.calculate_discounted_price %}
                    <span class="ml-3 text-danger"><b><del> ${{product.price}} </del></b></span>
                    {% endif %}                
                </div> <!-- price-wrap.// --> {% endcomment %}
                <div class="rating-star">
                    <span>
                      <i class="fa fa-star{% if product.averageReview < 0.5 %}-o{% elif single_product.averageReview < 1 and single_product.averageReview >= 0.5 %}-half-o{% endif %}" aria-hidden="true"></i>
                      <i class="fa fa-star{% if product.averageReview < 1.5 %}-o{% elif single_product.averageReview < 2 and single_product.averageReview >= 1.5 %}-half-o{% endif %}" aria-hidden="true"></i>
                      <i class="fa fa-star{% if product.averageReview < 2.5 %}-o{% elif single_product.averageReview < 3 and single_product.averageReview >= 2.5 %}-half-o{% endif %}" aria-hidden="true"></i>
                      <i class="fa fa-star{% if product.averageReview < 3.5 %}-o{% elif single_product.averageReview < 4 and single_product.averageReview >= 3.5 %}-half-o{% endif %}" aria-hidden="true"></i>
                      <i class="fa fa-star{% if product.averageReview < 4.5 %}-o{% elif single_product.averageReview < 5 and single_product.averageReview >= 4.5 %}-half-o{% endif %}" aria-hidden="true"></i>
                    </span>
                  </div> 
            </div>
            <a href="{{product.get_url}}" class="btn btn-block btn-primary w-100">View Details </a>
        {% if user.is_authenticated %}
        <a href="{% url "add_to_wishlist" product.id %}" class="btn btn-block btn-danger"><i class="fa fa-heart"></i>Add to Wishlist</a>
        {% else %}
        <a href="#" class="btn btn-danger btn-block disabled w-100"><i class="fa fa-heart"></i> Add to Wishlist</a>
        {% endif %}
        </figcaption>
    </figure>
</div> <!-- col.// -->
{% endfor %}